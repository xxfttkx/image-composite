name: Generate Composite Image Daily

permissions:
  contents: write

on:
  schedule:
    - cron: "0 16 * * *" # æ¯å¤© UTC 16 ç‚¹æ‰§è¡Œä¸€æ¬¡ï¼ˆåŒ—äº¬æ—¶é—´ 0:00ï¼‰
  workflow_dispatch: # å¯æ‰‹åŠ¨è§¦å‘

jobs:
  generate:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ§¾ Checkout repository
        uses: actions/checkout@v4

      - name: ğŸ Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.x"

      - name: ğŸ“¦ Install dependencies
        run: pip install -r requirements.txt

      - name: ğŸ–¼ Run main script
        run: python main.py

      # è‡ªåŠ¨æ·»åŠ å’Œæäº¤æ›´æ”¹
      - name: Commit changes
        uses: EndBug/add-and-commit@v9
        with:
          add: "." # æ·»åŠ æ‰€æœ‰æ›´æ”¹
          message: "Automated changes by GitHub Actions" # æäº¤ä¿¡æ¯
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # ä½¿ç”¨ GitHub æä¾›çš„é»˜è®¤ token
